(this.webpackJsonpffmpeg=this.webpackJsonpffmpeg||[]).push([[0],{22:function(e,t,n){e.exports=n(65)},27:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(4),i=n.n(c),o=n(15),l=n(3),u=(n(7),n(27),n(2)),s=(n(32),n(33),function(e){return r.a.createElement("button",{className:"ui-button ".concat(e.theme||"primary"),disabled:e.disabled,onClick:function(t){e.onClick&&e.onClick(t)}},e.children)}),m=function(e){var t=function(){switch(e.currentStepNumber){case 1:return{selectButtonTheme:"primary-animated",selectButtonText:"Select image"};case 2:return{selectButtonTheme:"gray",selectButtonText:"Change image"};case 3:return{selectButtonTheme:"gray",selectButtonText:"Select other image"};default:return{selectButtonTheme:"gray",selectButtonText:"Select image"}}}();return r.a.createElement("div",null,r.a.createElement(s,{theme:t.selectButtonTheme},r.a.createElement("div",{className:"buttons-header__item"},r.a.createElement("input",{type:"file",accept:"image/*",onChange:function(t){return function(t){var n=t.target.files[0];if(n)if(["image/gif","image/jpeg","image/jpg","image/png"].includes(n.type)){if(e.onSetFile(n),FileReader){var a=new FileReader;a.readAsDataURL(n),a.onload=function(t){e.onSetFileImageBase64(t.target.result)}}else alert("\ud83e\udd15 Not supported in your browser:(");e.onSetFileVideoUrl(null)}else alert("\ud83e\udd27 You selected not an image!")}(t)}}),r.a.createElement("span",null,t.selectButtonText)))," ")},f=n(1),d=n.n(f),p=n(5),h=n(20),g=function(){var e=Object(p.a)(d.a.mark((function e(t){var n,a,r,c,i,o,l,u,s,m;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.form,a=t.file,r=t.setStatus,e.prev=1,c=/(?:\.([^.]+))?$/.exec(a.name)[1],i=Object(h.createFFmpeg)(),r("preparing"),n.width&&n.height&&n.duration){e.next=8;break}throw Error({message:"you set up the form incorrectly:("});case 8:if(5e3,5e3,60,!(n.height>5e3||n.width>5e3||n.duration>60)){e.next=14;break}throw o="max: w - ".concat(5e3,", h - ").concat(5e3,", d - ").concat(60),Error({message:"too big parameters, the application will crash... (".concat(o,")")});case 14:return e.next=16,i.load();case 16:return e.next=18,i.write("input.".concat(c),a);case 18:return r("converting"),l='-loop 1 -r 30 -i "input.'.concat(c,'" -t ').concat(n.duration),u='-vf "scale='.concat(n.width,":").concat(n.height,',format=yuv420p" -codec:v libx264 output.mp4'),e.next=23,i.run("".concat(l," ").concat(u));case 23:return r("loading"),s=i.read("output.mp4"),m=URL.createObjectURL(new Blob([s.buffer],{type:"video/mp4"})),e.abrupt("return",{fileVideoUrl:m});case 29:return e.prev=29,e.t0=e.catch(1),e.abrupt("return",{error:e.t0});case 32:case"end":return e.stop()}}),e,null,[[1,29]])})));return function(t){return e.apply(this,arguments)}}(),v=n(6),b=Object(v.b)({name:"counter",initialState:{convertingStatus:"",isConverting:!1},reducers:{setConvertingStatus:function(e,t){e.convertingStatus=t.payload},setIsConverting:function(e,t){e.isConverting=t.payload}}}),E=b.actions,S=E.setConvertingStatus,y=E.setIsConverting,C=b.reducer,_=function(e){var t=Object(u.b)(),n=function(){var n=Object(p.a)(d.a.mark((function n(){var a,r;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t(S("doing")),t(y(!0)),a={form:e.form,file:e.file,setStatus:function(e){return t(S(e))}},n.next=5,g(a);case 5:(r=n.sent).error?alert("\ud83e\udd74 Error: "+r.error.message):e.onSetFileVideoUrl(r.fileVideoUrl),t(S("doing")),t(y(!1));case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return r.a.createElement("div",{className:"buttons-header__item-wrapper"},r.a.createElement(s,{onClick:function(){return n()}},"Convert"))},w=function(e){return r.a.createElement("div",{className:"buttons-header__item-wrapper download"},r.a.createElement(s,{theme:"primary-animated",onClick:function(){return function(){try{var t=e.file.name.replace(/(?:\.([^.]+))?$/,"")+".mp4",n=document.createElement("a");n.download=t,n.href=e.fileVideoUrl,document.body.appendChild(n),n.click(),document.body.removeChild(n)}catch(a){alert("\ud83e\udd74 Error: "+a.message)}}()}},"Download video"))},N=function(e){return r.a.createElement("div",{className:"buttons-header__item-wrapper"},r.a.createElement(s,{theme:"gray",onClick:function(){window.confirm("Are you sure you want to delete this video file and go to previous step?")&&e.onCancel()}},"Set other parameters"))},j=function(e){return r.a.createElement("div",{className:"buttons-header"},r.a.createElement("div",{className:"buttons-header__item-wrapper ".concat(e.currentStepNumber>1?"":"not-selected")},r.a.createElement(m,{currentStepNumber:e.currentStepNumber,handleOuterState:e.handleOuterState,onSetFile:e.onSetFile,onSetFileVideoUrl:e.onSetFileVideoUrl,onSetFileImageBase64:e.onSetFileImageBase64})),2===e.currentStepNumber&&r.a.createElement(_,{file:e.file,form:e.form,onSetFileVideoUrl:e.onSetFileVideoUrl}),3===e.currentStepNumber&&r.a.createElement(N,{onCancel:e.onCancel}),3===e.currentStepNumber&&r.a.createElement(w,{file:e.file,fileVideoUrl:e.fileVideoUrl}))},O=(n(62),n(63),function(e){return r.a.createElement("input",{className:"ui-input",type:e.type,value:e.value,onKeyPress:function(t){return"number"===e.type?function(e){var t=e.keyCode?e.keyCode:e.which;(t<48||t>57)&&46!==t&&e.preventDefault()}(t):null},onChange:function(t){e.onChange&&e.onChange(t.target.value),e.onChangeFull&&e.onChangeFull(t)}})}),F=function(e){return r.a.createElement("div",{className:"form"},r.a.createElement("div",{className:"form__item"},r.a.createElement("span",{className:"form__label"},"Width (pixel):"),r.a.createElement(O,{type:"number",value:e.form.width,onChange:function(t){return e.onChange({width:t})}})),r.a.createElement("div",{className:"form__item"},r.a.createElement("span",{className:"form__label"},"Height (pixel):"),r.a.createElement(O,{type:"number",value:e.form.height,onChange:function(t){return e.onChange({height:t})}})),r.a.createElement("div",{className:"form__item"},r.a.createElement("span",{className:"form__label"},"Duration (sec):"),r.a.createElement(O,{type:"number",value:e.form.duration,onChange:function(t){return e.onChange({duration:t})}})))},B=(n(64),function(e){var t=function(){switch(!0){case!!e.fileImageBase64&&!e.fileVideoUrl:return{type:"Image",title:e.file.name,htmlContent:r.a.createElement("img",{className:"file__content",src:e.fileImageBase64,alt:"Loaded"})};case!!e.fileImageBase64&&!!e.fileVideoUrl:return{type:"Video",title:e.file.name.replace(/(?:\.([^.]+))?$/,"")+".mp4",htmlContent:r.a.createElement("video",{className:"file__content",controls:!0},r.a.createElement("source",{src:e.fileVideoUrl,type:"video/mp4"}))};default:return{type:"",title:"",htmlContent:null}}}();return r.a.createElement("div",{className:"file-wrapper"},r.a.createElement("div",{className:"file__type"},t.type),r.a.createElement("div",{className:"file"},r.a.createElement("div",{className:"file__title"},t.title),t.htmlContent))}),U=function(){var e=Object(u.c)((function(e){return e.status.convertingStatus})),t=Object(a.useState)(0),n=Object(l.a)(t,2),c=n[0],i=n[1],o=Object(a.useState)(0),s=Object(l.a)(o,2),m=s[0],f=s[1];return Object(a.useEffect)((function(){f(+new Date)}),[]),Object(a.useEffect)((function(){var e=setInterval((function(){i(Math.round((+new Date-m)/1e3))}),1e3);return function(){return clearInterval(e)}}),[m]),r.a.createElement("div",{className:"app__doing loading"},e," (",c," sec)")},x=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(""),s=Object(l.a)(i,2),m=s[0],f=s[1],d=Object(a.useState)(""),p=Object(l.a)(d,2),h=p[0],g=p[1],v=Object(a.useState)({width:1e3,height:500,duration:5}),b=Object(l.a)(v,2),E=b[0],S=b[1],y=Object(u.c)((function(e){return e.status.isConverting})),C=function(){switch(!0){case!n:return{number:1,icons:"\ud83e\udd84\ud83e\udd84\ud83e\udd84"};case!!n&&!h:return{number:2,icons:"\ud83d\udc3a\ud83d\udc3a\ud83d\udc3a\ud83d\udc3a"};case!!n&&!!h:return{number:3,icons:"\ud83d\udc38\ud83d\udc38\ud83d\udc38\ud83d\udc38\ud83d\udc38"};default:return{number:0,icons:"\ud83d\ude25\ud83d\ude25\ud83d\ude25"}}}();return r.a.createElement("div",{className:"app-wrapper"},r.a.createElement("div",{className:"app"},r.a.createElement("header",{className:"app__header"},r.a.createElement("strong",{className:"app__header-title"},"FFMPEG ",C.icons),r.a.createElement("div",{className:"app__header-description"},"Image to video conversion")),y?r.a.createElement(U,null):r.a.createElement("div",{className:"app__actions-and-form"},r.a.createElement(j,{file:n,currentStepNumber:C.number,fileVideoUrl:h,form:E,onCancel:function(){g(null)},onSetFile:c,onSetFileVideoUrl:g,onSetFileImageBase64:f}),2===C.number&&r.a.createElement(F,{form:E,onChange:function(e){S(Object(o.a)(Object(o.a)({},E),e))}})),C.number>1&&r.a.createElement(B,{file:n,fileImageBase64:m,fileVideoUrl:h}),r.a.createElement("div",{style:{height:C.number>1?"20vh":"30vh"}})))},V=Object(v.a)({reducer:{status:C}});i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,{store:V},r.a.createElement(x,null))),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.5367f145.chunk.js.map